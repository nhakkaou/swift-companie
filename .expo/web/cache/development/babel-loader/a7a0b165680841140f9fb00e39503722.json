{"ast":null,"code":"import _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nvar _jsxFileName = \"/mnt/c/Users/noure/OneDrive/Bureau/swift-companion/node_modules/react-native-pathjs-charts/src/Axis.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Circle, G, Path, Text } from 'react-native-svg';\nimport { fontAdapt } from \"./util\";\nimport _ from 'lodash';\n\nvar Pathjs = require('paths-js/path');\n\nexport var AxisStruct = function () {\n  function AxisStruct(scale, options, chartArea, horizontal) {\n    _classCallCheck(this, AxisStruct);\n\n    this.scale = scale;\n    this.options = options;\n    this.chartArea = chartArea;\n    this.margin = chartArea.margin;\n    this.horizontal = horizontal;\n  }\n\n  _createClass(AxisStruct, [{\n    key: \"axis\",\n    value: function axis() {\n      var _this = this;\n\n      var horizontal = this.horizontal;\n      var xAxis = this.chartArea.x;\n      var yAxis = this.chartArea.y;\n      var currentAxis = horizontal ? xAxis : yAxis;\n      var tickInterval = this.options.tickCount || 10;\n      var decimalPlaces = this.options.decimalPlaces || 2;\n      var ticks = this.options.tickValues !== undefined && this.options.tickValues.length !== 0 ? _.map(this.options.tickValues, function (v) {\n        return v.value;\n      }) : AxisStruct.getTickValues(currentAxis, tickInterval, decimalPlaces);\n      var fixed = this.options.zeroAxis ? this.scale(0) : horizontal ? yAxis.min : xAxis.min;\n      var start = {\n        x: horizontal ? xAxis.min : fixed,\n        y: horizontal ? fixed : yAxis.min\n      };\n      var end = {\n        x: horizontal ? xAxis.max : fixed,\n        y: horizontal ? fixed : yAxis.max\n      };\n      var tailLength = this.options.tailLength || 10;\n      var margin = this.margin;\n\n      if (margin !== undefined) {\n        if (horizontal) {\n          start.x += margin.left - tailLength || 0;\n          start.y += margin.top || 0;\n          end.x += margin.left || 0;\n          end.y += margin.top || 0;\n        } else {\n          start.x += margin.left || 0;\n          start.y += margin.top + tailLength || 0;\n          end.x += margin.left || 0;\n          end.y += margin.top - tailLength || 0;\n        }\n      }\n\n      return {\n        item: currentAxis,\n        path: Pathjs().moveto(start).lineto(end).closepath(),\n        ticks: ticks,\n        lines: ticks.map(function (c, i) {\n          var scaleBase = isNaN(c) ? i : c;\n          var lineStart = {\n            x: horizontal ? _this.scale(scaleBase) + margin.left : xAxis.min + margin.left,\n            y: horizontal ? yAxis.min + margin.top : _this.scale(scaleBase) + margin.top\n          };\n          return Pathjs().moveto(lineStart).lineto(horizontal ? lineStart.x : xAxis.max + margin.left, horizontal ? yAxis.max + (margin.top - tailLength) : lineStart.y);\n        }, this)\n      };\n    }\n  }], [{\n    key: \"calcStepSize\",\n    value: function calcStepSize(range, targetSteps) {\n      var tempStep = range / targetSteps;\n      var mag = Math.floor(Math.log(tempStep) / Math.log(10));\n      var magPow = Math.pow(10, mag);\n      var magMsd = Math.round(tempStep / magPow + 0.5);\n      if (magMsd > 5.0) magMsd = 10.0;else if (magMsd > 2.0) magMsd = 5.0;else if (magMsd > 1.0) magMsd = 2.0;\n      return magMsd * magPow;\n    }\n  }, {\n    key: \"roundFloat\",\n    value: function roundFloat(floatVal, decimalPlaces) {\n      return Math.round(parseFloat((floatVal * Math.pow(10, decimalPlaces)).toFixed(decimalPlaces))) / Math.pow(10, decimalPlaces);\n    }\n  }, {\n    key: \"getTickValues\",\n    value: function getTickValues(axis, tickCount, decimalPlaces) {\n      var tickStep = AxisStruct.calcStepSize(axis.maxValue - axis.minValue, tickCount);\n      var maxTick = axis.minValue + tickCount * tickStep;\n\n      var tickValues = _.range(axis.minValue, maxTick, tickStep);\n\n      tickValues = tickValues.map(function (tickValue) {\n        return AxisStruct.roundFloat(tickValue, decimalPlaces);\n      });\n      return tickValues;\n    }\n  }]);\n\n  return AxisStruct;\n}();\n\nvar Axis = function (_Component) {\n  _inherits(Axis, _Component);\n\n  var _super = _createSuper(Axis);\n\n  function Axis() {\n    _classCallCheck(this, Axis);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Axis, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          chartArea = _this$props.chartArea,\n          options = _this$props.options,\n          scale = _this$props.scale;\n      var horizontal = options.orient === 'top' || options.orient === 'bottom';\n      var axis = new AxisStruct(scale, options, chartArea, horizontal).axis();\n      var textAnchor = 'start';\n      if (options.orient === 'top' || options.orient === 'bottom') textAnchor = 'middle';\n      if (options.orient === 'left') textAnchor = 'end';\n      if (options.orient === 'right') textAnchor = 'start';\n      var xy = [0, 0];\n      if (options.orient === 'top') xy = [0, -5];\n      if (options.orient === 'bottom') xy = [0, 5];\n      if (options.orient === 'left') xy = [-5, -10];\n      if (options.orient === 'right') xy = [5, 5];\n\n      if (typeof options.color !== 'string') {\n        options.color = '#3E90F0';\n      }\n\n      if (typeof options.opacity !== 'number') {\n        options.opacity = 0.5;\n      }\n\n      if (typeof options.strokeWidth !== 'number') {\n        options.strokeWidth = 3;\n      }\n\n      if (typeof options.tickSize !== 'number') {\n        options.tickSize = 2;\n      }\n\n      if (typeof options.tickColor !== 'string') {\n        options.tickColor = 'grey';\n      }\n\n      var textStyle = fontAdapt(options.label);\n\n      var ticks = _.map(axis.ticks, function (c, i) {\n        var label = options.labelFunction !== undefined ? options.labelFunction.apply(this, [c]) : c;\n        var scaleBase = isNaN(c) ? i : c;\n        var gxy = horizontal ? [scale(scaleBase), chartArea.y.min] : [chartArea.x.min, scale(scaleBase)];\n        var returnValue;\n\n        if (label !== undefined && label !== null) {\n          returnValue = React.createElement(G, {\n            key: i,\n            x: gxy[0],\n            y: gxy[1],\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 11\n            }\n          }, options.showTicks && React.createElement(Circle, {\n            r: options.tickSize,\n            cx: \"0\",\n            cy: \"0\",\n            stroke: options.tickColor,\n            fill: options.tickColor,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }\n          }), options.showLabels && React.createElement(Text, {\n            x: xy[0],\n            y: xy[1],\n            fontFamily: textStyle.fontFamily,\n            fontSize: textStyle.fontSize,\n            fontWeight: textStyle.fontWeight,\n            fontStyle: textStyle.fontStyle,\n            fill: textStyle.fill,\n            textAnchor: textAnchor,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }\n          }, label));\n        }\n\n        return returnValue;\n      });\n\n      var offset = {\n        x: chartArea.margin.left * -1,\n        y: chartArea.margin.top * -1\n      };\n      var returnV = React.createElement(G, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 19\n        }\n      }, React.createElement(G, {\n        x: offset.x,\n        y: offset.y,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }\n      }, options.showAxis ? React.createElement(Path, {\n        d: axis.path.print(),\n        strokeOpacity: options.opacity,\n        stroke: options.color,\n        strokeWidth: options.strokeWidth,\n        fill: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 37\n        }\n      }) : null), ticks);\n      return returnV;\n    }\n  }]);\n\n  return Axis;\n}(Component);\n\nexport { Axis as default };","map":{"version":3,"sources":["/mnt/c/Users/noure/OneDrive/Bureau/swift-companion/node_modules/react-native-pathjs-charts/src/Axis.js"],"names":["React","Component","Circle","G","Path","Text","fontAdapt","_","Pathjs","require","AxisStruct","scale","options","chartArea","horizontal","margin","xAxis","x","yAxis","y","currentAxis","tickInterval","tickCount","decimalPlaces","ticks","tickValues","undefined","length","map","v","value","getTickValues","fixed","zeroAxis","min","start","end","max","tailLength","left","top","item","path","moveto","lineto","closepath","lines","c","i","scaleBase","isNaN","lineStart","range","targetSteps","tempStep","mag","Math","floor","log","magPow","pow","magMsd","round","floatVal","parseFloat","toFixed","axis","tickStep","calcStepSize","maxValue","minValue","maxTick","tickValue","roundFloat","Axis","props","orient","textAnchor","xy","color","opacity","strokeWidth","tickSize","tickColor","textStyle","label","labelFunction","apply","gxy","returnValue","showTicks","showLabels","fontFamily","fontSize","fontWeight","fontStyle","fill","offset","returnV","showAxis","print"],"mappings":"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","sourcesContent":["/*\nCopyright 2016 Capital One Services, LLC\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and limitations under the License.\n\nSPDX-Copyright: Copyright (c) Capital One Services, LLC\nSPDX-License-Identifier: Apache-2.0\n*/\n\nimport React, {Component} from 'react'\nimport { Circle, G, Path, Text } from 'react-native-svg'\nimport { fontAdapt } from './util'\nimport _ from 'lodash'\nconst Pathjs = require('paths-js/path')\n\nexport class AxisStruct {\n\n  constructor(scale, options, chartArea, horizontal) {\n    this.scale = scale\n    this.options = options\n    this.chartArea = chartArea\n    this.margin = chartArea.margin\n    this.horizontal = horizontal\n  }\n\n  static calcStepSize(range, targetSteps)\n  {\n    const tempStep = range / targetSteps\n    const mag = Math.floor(Math.log(tempStep) /  Math.log(10))\n    const magPow = Math.pow(10, mag)\n    let magMsd = Math.round(tempStep / magPow + 0.5)\n\n    if (magMsd > 5.0)\n      magMsd = 10.0\n    else if (magMsd > 2.0)\n      magMsd = 5.0\n    else if (magMsd > 1.0)\n      magMsd = 2.0\n\n    return magMsd * magPow\n  }\n\n  static roundFloat(floatVal, decimalPlaces) {\n    return Math.round(parseFloat((floatVal * Math.pow(10, decimalPlaces)).toFixed(decimalPlaces))) / Math.pow(10, decimalPlaces)\n  }\n\n  static getTickValues(axis, tickCount, decimalPlaces) {\n    const tickStep = AxisStruct.calcStepSize((axis.maxValue - axis.minValue),tickCount)\n    const maxTick = axis.minValue + (tickCount * tickStep)\n    let tickValues = _.range(axis.minValue, maxTick, tickStep)\n    tickValues = tickValues.map(tickValue => {\n      return AxisStruct.roundFloat(tickValue, decimalPlaces)\n    })\n    return tickValues\n  }\n\n  axis() {\n\n    const horizontal = this.horizontal\n    const xAxis = this.chartArea.x\n    const yAxis = this.chartArea.y\n    const currentAxis = horizontal?xAxis:yAxis\n    const tickInterval = this.options.tickCount || 10\n    const decimalPlaces = this.options.decimalPlaces || 2\n    const ticks = this.options.tickValues !== undefined && this.options.tickValues.length !== 0? _.map(this.options.tickValues,function(v){return v.value }):AxisStruct.getTickValues(currentAxis, tickInterval, decimalPlaces)\n    const fixed = this.options.zeroAxis?this.scale(0):horizontal?yAxis.min:xAxis.min\n    const start = {x: horizontal?xAxis.min:fixed, y: horizontal?fixed:yAxis.min}\n    const end = {x:horizontal?xAxis.max:fixed,y: horizontal?fixed:yAxis.max}\n    const tailLength = this.options.tailLength || 10\n\n    const margin = this.margin\n    if (margin !== undefined){\n      if (horizontal){\n        start.x += (margin.left - tailLength) || 0\n        start.y += margin.top || 0\n        end.x += (margin.left) || 0\n        end.y += margin.top || 0\n      }\n      else {\n        start.x += margin.left || 0\n        start.y += (margin.top + tailLength) || 0\n        end.x += margin.left || 0\n        end.y += (margin.top - tailLength)  || 0\n      }\n    }\n\n    return {\n      item: currentAxis,\n      path: Pathjs().moveto(start).lineto(end).closepath(),\n      ticks: ticks,\n      lines: ticks.map((c,i) => {\n        let scaleBase = isNaN(c) ? i : c\n        const lineStart = {x: horizontal ? this.scale(scaleBase) + margin.left : xAxis.min + margin.left, y: horizontal ? yAxis.min + margin.top : this.scale(scaleBase) + margin.top}\n        return Pathjs().moveto(lineStart).lineto(horizontal ? lineStart.x : xAxis.max + margin.left, horizontal ? yAxis.max + (margin.top - tailLength) : lineStart.y)\n      },this)\n    }\n  }\n}\n\nexport default class Axis extends Component {\n\n  render() {\n    const { chartArea, options, scale } = this.props\n    const horizontal = options.orient ==='top' || options.orient ==='bottom'\n\n    const axis = new AxisStruct(scale,options,chartArea,horizontal).axis()\n\n    let textAnchor = 'start'\n    if (options.orient === 'top' || options.orient === 'bottom') textAnchor = 'middle'\n    if (options.orient === 'left') textAnchor = 'end'\n    if (options.orient === 'right') textAnchor = 'start'\n\n    let xy = [0,0]\n    if (options.orient === 'top')  xy = [0,-5]\n    if (options.orient === 'bottom') xy = [0,5]\n    if (options.orient === 'left')  xy = [-5,-10]\n    if (options.orient === 'right')  xy = [5,5]\n\n    if (typeof options.color !== 'string') {\n      options.color = '#3E90F0'\n    }\n\n    if (typeof options.opacity !== 'number') {\n      options.opacity = 0.5\n    }\n\n    if (typeof options.strokeWidth !== 'number') {\n      options.strokeWidth = 3\n    }\n\n    if (typeof options.tickSize !== 'number') {\n      options.tickSize = 2\n    }\n\n    if (typeof options.tickColor !== 'string') {\n      options.tickColor = 'grey'\n    }\n\n    const textStyle = fontAdapt(options.label)\n\n    const ticks =_.map(axis.ticks, function (c, i) {\n      const label = options.labelFunction !== undefined? options.labelFunction.apply(this, [c]) : c\n      let scaleBase = isNaN(c) ? i : c\n      let gxy = horizontal ? [scale(scaleBase),chartArea.y.min]:[chartArea.x.min,scale(scaleBase)]\n\n      let returnValue\n      if (label !== undefined && label !== null) {\n        returnValue =\n          <G key={i} x={gxy[0]} y={gxy[1]}>\n              {options.showTicks &&\n                <Circle r={options.tickSize} cx=\"0\" cy=\"0\" stroke={options.tickColor} fill={options.tickColor} />\n              }\n              {options.showLabels &&\n                <Text x={xy[0]} y={xy[1]}\n                      fontFamily={textStyle.fontFamily}\n                      fontSize={textStyle.fontSize}\n                      fontWeight={textStyle.fontWeight}\n                      fontStyle={textStyle.fontStyle}\n                      fill={textStyle.fill}\n                      textAnchor={textAnchor}>\n                      {label}\n                </Text>}\n          </G>\n      }\n\n      return returnValue\n    })\n\n    let offset = {\n      x: chartArea.margin.left * -1,\n      y: chartArea.margin.top * -1\n      // x: 0,\n      // y: 0\n    }\n\n    let returnV = <G>\n              <G x={offset.x} y={offset.y}>\n                {options.showAxis ? <Path d={axis.path.print()} strokeOpacity={options.opacity} stroke={options.color} strokeWidth={options.strokeWidth} fill=\"none\"/> : null}\n              </G>\n              {ticks}\n            </G>\n\n    return returnV\n\n  }\n}\n"]},"metadata":{},"sourceType":"module"}